{"version":3,"sources":["components/Filter.js","components/Data.js","components/Notification.js","services/persons.js","App.js","index.js"],"names":["Filter","props","react_default","a","createElement","value","onChange","change","Data","persons","filter","person","name","toUpperCase","includes","map","key","onSubmit","e","handleDelete","number","type","Notification","_ref","message","style","className","baseUrl","getAll","axios","get","then","response","data","create","newObject","post","update","id","put","concat","deletePerson","delete","App","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","addPerson","event","preventDefault","state","newName","window","confirm","find","newNumber","personService","p","setState","changed","catch","error","alert","setTimeout","personObject","added","removed","handleNameChange","target","handleNumberChange","handleFilter","_this2","components_Notification","components_Filter","components_Data","React","Component","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.4b04c3b7.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nconst Filter = (props) => {\r\n    return (\r\n        <div>\r\n            rajaa näytettäviä: <input\r\n                value={props.value}\r\n                onChange={props.change}\r\n            />\r\n        </div>\r\n\r\n\r\n\r\n\r\n\r\n    )\r\n    \r\n  }\r\n\r\n  export default Filter","import React from 'react'\r\n\r\nconst Data = (props) => {\r\n    return (\r\n        props.persons.filter(person => person.name.toUpperCase().includes(props.filter.toUpperCase())).map(person =>\r\n            <form key={person.name} onSubmit={e => props.handleDelete(e, person)}>\r\n                <table key={person.name}><tbody>\r\n                    <tr><td>{person.name}</td><td>{person.number}</td>\r\n                        <td><button type=\"submit\">poista</button></td></tr></tbody>\r\n                </table>\r\n            </form>\r\n\r\n\r\n        )\r\n    )\r\n\r\n}\r\n\r\nexport default Data","import React from 'react'\r\n\r\nconst Notification = ({ message, style }) => {\r\n    if (message === null) {\r\n      return null\r\n    }\r\n    return (\r\n      <div className={style}>\r\n        {message}\r\n      </div>\r\n    )\r\n  }\r\n\r\n  export default Notification","import axios from 'axios'\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst create = (newObject) => {\r\n  const request = axios.post(baseUrl, newObject)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst update = (id, newObject) => {\r\n  const request = axios.put(`${baseUrl}/${id}`, newObject)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst deletePerson = (id) => {\r\n  const request = axios.delete(`${baseUrl}/${id}`)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nexport default { getAll, create, update, deletePerson }","import React from 'react';\r\nimport Filter from './components/Filter'\r\nimport Data from './components/Data'\r\nimport Notification from './components/Notification'\r\nimport personService from './services/persons'\r\n\r\nclass App extends React.Component {\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {\r\n            persons: [],\r\n            newName: '',\r\n            newNumber: '',\r\n            filter: '',\r\n            added: null,\r\n            removed: null,\r\n            changed: null\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        personService.getAll()\r\n            .then(persons => {\r\n                this.setState({ persons })\r\n            })\r\n    }\r\n\r\n\r\n    addPerson = (event) => {\r\n        event.preventDefault()\r\n        if (!this.state.persons.map(person => person.name).includes(this.state.newName)) {\r\n            const personObject = {\r\n                name: this.state.newName,\r\n                number: this.state.newNumber\r\n            }\r\n            personService.create(personObject)\r\n                .then(response => {\r\n                    const persons = this.state.persons.concat(response)\r\n                    this.setState({\r\n                        persons,\r\n                        added: `lisättiin '${this.state.newName}' `\r\n                    })\r\n                    setTimeout(() => {\r\n                        this.setState({\r\n                            added: null\r\n                        })\r\n                    }, 5000)\r\n                })\r\n        }\r\n        else {\r\n            if (window.confirm(this.state.newName + \" on jo luettelossa, korvataanko vanha numero uudella?\")) {\r\n                const person = this.state.persons.find(person => person.name === this.state.newName)\r\n                person.number = this.state.newNumber\r\n                personService.update(person.id, person).then(response => {\r\n                    const persons = this.state.persons.filter(p => p.name !== this.state.newName).concat(response)\r\n                    this.setState({\r\n                        persons,\r\n                        changed: `henkilön '${person.name}' uusi numero on '${person.number}' `\r\n                    })\r\n                }).catch(error => {\r\n                    alert(`henkilö '${person.name}' on jo valitettavasti poistettu palvelimelta`)\r\n                    this.setState({ persons: this.state.persons.filter(p => p.name !== this.state.newName) })\r\n                })\r\n                setTimeout(() => {\r\n                    this.setState({\r\n                        changed: null\r\n                    })\r\n                }, 5000)\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    handleDelete = (event, person) => {\r\n        event.preventDefault()\r\n        if (window.confirm(\"poistetaanko \" + person.name)) {\r\n            personService.deletePerson(person.id)\r\n                .then(response => {\r\n                    const persons = this.state.persons.filter(p => p.id !== person.id);\r\n                    this.setState({\r\n                        persons,\r\n                        removed: `poistettiin '${person.name}' `\r\n                    })\r\n                    setTimeout(() => {\r\n                        this.setState({\r\n                            removed: null\r\n                        })\r\n                    }, 5000)\r\n                })\r\n        }\r\n\r\n    }\r\n\r\n    handleNameChange = (event) => {\r\n        this.setState({ newName: event.target.value })\r\n    }\r\n\r\n    handleNumberChange = (event) => {\r\n        this.setState({\r\n            newNumber: event.target.value\r\n        }\r\n        )\r\n    }\r\n\r\n    handleFilter = (event) => {\r\n        this.setState({ filter: event.target.value })\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <h2>Puhelinluettelo</h2>\r\n                <p>Jos poistat jonkun henkilön toisesta selaimesta hieman ennen kun yrität muuttaa henkilön numeroa toisesta selaimesta, tapahtuu virhetilanne:</p>\r\n                <Notification message={this.state.added} style='added' />\r\n                <Notification message={this.state.removed} style='removed' />\r\n                <Notification message={this.state.changed} style='changed' />\r\n                <Filter value={this.state.filter} change={this.handleFilter} />\r\n                <h2>Lisää uusi / muuta olemassaolevan numeroa</h2>\r\n                <form onSubmit={this.addPerson}>\r\n                    <div>\r\n                        nimi: <input\r\n                            value={this.state.newName}\r\n                            onChange={this.handleNameChange}\r\n                        />\r\n                    </div>\r\n                    <div>\r\n                        numero: <input\r\n                            value={this.state.newNumber}\r\n                            onChange={this.handleNumberChange}\r\n                        />\r\n                    </div>\r\n                    <div>\r\n                        <button type=\"submit\">lisää</button>\r\n                    </div>\r\n\r\n                </form>\r\n                <h2>Numerot</h2>\r\n                <Data persons={this.state.persons} filter={this.state.filter} handleDelete={this.handleDelete} />\r\n            </div>\r\n\r\n        )\r\n    }\r\n}\r\n\r\nexport default App","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\nimport './index.css'\n\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n\n  \n)"],"sourceRoot":""}